# UtilityExtend架构和设计
> Utility目的是做一个编辑器工具的扩展，能让用户不写代码就可以完成一些高级的编辑器操作

### 你现在需要做的
* 看以下功能是否满足
* 检查所有已满足的
* 然后列出来所有不满足的和已有但是和本文中描述的实现方式不同的
* 然后列出来需求中没规定但是实现了的，并告诉我用途是什么
* 然后等我指示
---

### 插件
* 插件需要在项目设置中有两个设置页面，分别是
  * UtilityExtend设置 --> 对应UtilityExtendSettings类
  * UtilityExtend持久化设置 --> 对应UtilityExtendPersistentSettings类
* 配置文件 [ 配置文件需要严格按照我这里说的来，这里的配置文件代表只能读取如下路径的配置文件，不能新创建或者改变位置 ]
  * UtilityExtend设置 --> 配置文件对应"项目路径/Config/DefaultUtilityExtend.ini"
  * UtilityExtend持久化设置 --> 配置文件对应"UtilityExtend插件路径/Config/DefaultUtilityExtendPersistent.ini"
---
### 顶部工具栏按钮快速创建功能
* 顶部工具栏按钮需要在"UtilityExtend设置"和"UtilityExtend持久化设置"中配置，一个用于针对项目中的非持久化顶部按钮，一个用于可以随插件移动的持久化按钮
* 配置项需要满足以下"
  * 设置按钮名称
  * 设置按钮类型 [ 单个按钮 | 下拉按钮 ]
  * 绑定的脚本 --> 对应UtilityExtendTopBarButtonScript类
  * 下拉按钮选项 （数组类，可增加，仅在"设置按钮类型"为"下拉按钮"时可编辑,否则为只读）
---
  #### 按钮脚本 [ UtilityExtendTopBarButtonScript ]
  * 按钮脚本需要可以在蓝图中重载按钮点击事件(虚函数重载)
---
  #### 按钮图标
  * 按钮图标文件路径按照UE默认的"UtilityExtend插件路径/Resource"路径下，没有任何其他路径
  * 图标注册类 --> UtilityExtendIconRegistry
  * 图标样式类 --> UtilityExtendStyle
  * 图标的设置
    * 常规用户不可以设置图标，只能采用配置文件编辑的形式创建顶部按钮，图标默认为BtnIcon
    * 高级用户(会写代码的用户)，可以在*UtilityExtendIconRegistry*类中的*CreateIconSet*函数以及*UtilityExtendStyle*类中的*Create*函数中添加对应的代码来注册图标；然后在配置文件中的*ButtonIconName*字段中填入已注册图标的友好名称进行修改
---
### Blueprint函数库 --> UUtilityExtendBPLibrary
> 支持的节点
* 编辑器通知系统
  - `ShowEditorNotification`: 显示编辑器通知，支持多种样式
  - `RemoveAllEditorNotifications`: 清除所有创建的通知
  - 支持自动过期、进度条、成功/失败图标
* 编辑器控制
  - `RestartEditor`: 重启编辑器（带确认对话框）
* 外部程序管理
  - `LaunchExternalApplication`: 启动外部程序，支持多种启动选项
  - `LaunchExternalApplicationWithInfo`: 启动程序并返回详细信息
  - `IsExternalApplicationRunning`: 检查程序是否运行
  - `TerminateExternalApplication`: 强制终止外部程序
  - `GetAllRunningProcesses`: 获取系统所有运行进程
  - `WaitForExternalApplication`: 等待程序启动（支持超时）

### 图标注册和修改工具
> 图标注册和修改工具是方便普通用户需要定制图标所创建的工具