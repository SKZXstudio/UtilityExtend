# SVG注册工具集

这是一个完整的SVG图标注册管理工具集，包含SVG图标注册管理和工具打包两个主要功能。

**注意：此工具仅支持Windows平台**

## 🚀 快速开始

### Windows用户
双击 `启动工具.bat` 文件，选择要启动的工具

## 📁 文件结构

```
SVGRegisterTool/
├── Resources/                 # 图标资源文件夹
│   ├── icon.ico             # 程序图标
│   └── icon.svg             # SVG图标
├── 启动工具.bat              # Windows统一启动脚本
├── SVG_Icon_Manager.py      # SVG图标注册管理工具
├── PackageTool.py           # 打包工具
├── requirements.txt         # Python依赖列表
├── README.md               # 本文件
└── 使用说明.md             # 详细使用说明
```

## 🛠️ 主要功能

### 1. SVG图标注册管理工具
- 🔍 自动扫描Resources目录中的SVG文件
- 📊 分析图标注册状态，识别缺失和孤立的注册
- ✏️ 批量添加缺失的图标注册
- 🗑️ 自动清理不再使用的图标注册
- 🔄 支持修改图标的友好显示名称
- 📝 生成详细的注册状态报告
- 🔧 **新增：重新编译功能** - 自动检测编辑器进程，智能编译项目

### 2. SVG工具打包器
- 🎯 选择源路径和目标路径
- ✏️ 自定义打包名称
- 🖼️ 支持自定义程序图标（PNG/JPG/BMP等格式转ICO）
- 📊 实时显示打包进度
- 📝 详细的打包日志记录
- 💾 支持日志保存和管理

## 📋 系统要求

- **操作系统**: Windows 10/11
- **Python**: 3.7 或更高版本
- **必要依赖**: psutil（进程管理）、svglib、reportlab
- **可选依赖**: PyInstaller（打包工具）

## 🔧 安装依赖

工具会自动检查和安装必要的依赖，您也可以手动安装：

```bash
pip install psutil svglib reportlab
# 如果需要打包功能
pip install pyinstaller
```

## 📖 使用方法

详细的安装和使用说明请参考 `使用说明.md` 文件。

## 🎯 使用场景

- **Unreal Engine插件开发**: 管理UtilityExtend插件中的SVG图标
- **图标资源管理**: 批量处理SVG图标文件
- **程序打包**: 将Python工具打包成可执行文件
- **图标注册状态监控**: 实时监控图标注册状态
- **项目编译**: 自动检测编辑器状态并重新编译项目

## 🚨 注意事项

1. 确保SVG文件格式正确
2. 检查文件路径是否包含特殊字符
3. 打包前确保所有依赖已正确安装
4. 建议在打包前备份重要文件
5. 重新编译功能仅支持Windows平台
6. 需要安装Visual Studio或Build Tools以支持MSBuild编译

## 🔍 故障排除

### 常见问题
- **工具无法启动**: 检查Python版本和安装状态
- **图标注册失败**: 检查SVG文件格式和路径
- **打包失败**: 查看日志信息，检查依赖安装状态
- **编译失败**: 检查MSBuild是否可用，确保编辑器已关闭

### 获取帮助
1. 查看工具内的日志信息
2. 参考 `使用说明.md` 文件
3. 检查Python版本和依赖状态
4. 验证文件路径和权限设置
5. 确认Windows平台和MSBuild环境

## 📝 更新日志

- **v2.0**: 添加重新编译功能，修复友好名称修改问题，仅支持Windows平台
- **v1.3**: 优化文件结构，合并启动脚本，改进用户体验
- **v1.2**: 集成打包工具，支持程序打包
- **v1.1**: 添加友好名管理功能
- **v1.0**: 初始版本，支持基本的SVG图标注册管理

## 🤝 贡献

欢迎提交问题报告和功能建议！

## 📄 许可证

本项目遵循相应的开源许可证。

# SVG注册工具修复说明

## 修复概述

本次修复解决了SVG注册工具的两个主要问题：
1. **编译按钮没效果** - 添加了主界面的编译按钮
2. **引擎路径没有保存** - 添加了配置保存和加载功能

## 修复内容

### 1. 添加编译按钮
- 在主界面左侧添加了"🔨 重新编译项目"按钮
- 按钮直接调用`recompile_project()`方法
- 解决了之前只能通过菜单访问编译功能的问题

### 2. 配置保存和加载功能
- 添加了`load_config()`和`save_config()`方法
- 配置文件保存在`config.json`中
- 自动保存用户设置的路径配置
- 程序启动时自动加载上次的配置

### 3. 改进的UI布局
- 左侧面板添加了完整的按钮区域
- 包含所有主要功能的快捷按钮：
  - 🔨 重新编译项目
  - 🔄 刷新扫描
  - 📝 重新注册
  - 📁 导入SVG
  - 📊 生成报告
  - ✏️ 重命名友好名

### 4. 修复编译功能问题
- 修复了编译过程中的变量作用域问题
- 改进了错误处理和日志记录
- 确保编译进度对话框正确显示

## 使用方法

### 设置路径
1. 点击菜单栏的"配置" -> "路径设置"
2. 设置项目路径和引擎路径
3. 点击"应用"保存设置
4. 配置会自动保存到`config.json`文件

### 编译项目
1. 确保路径设置正确
2. 点击左侧的"🔨 重新编译项目"按钮
3. 等待编译完成
4. 查看编译日志和结果

### 其他功能
- 使用左侧按钮快速访问各种功能
- 所有操作都会记录在日志中
- 支持SVG文件的导入、注册和友好名管理

## 技术细节

### 配置文件格式
```json
{
  "project_path": "F:\\Project\\UnrealEngine\\NEXBox\\Client",
  "engine_path": "C:\\Program Files\\Epic Games\\UE_5.3"
}
```

### 配置保存位置
- 配置文件保存在：`{插件路径}/Third/SVGRegisterTool/config.json`
- 程序启动时自动加载
- 路径设置后自动保存

### 编译流程
1. 验证路径设置
2. 检查项目文件存在性
3. 检测并停止运行中的编辑器
4. 生成项目文件
5. 执行编译
6. 保存编译日志
7. 显示结果

## 测试验证

运行`test_fix.py`脚本可以验证修复是否成功：
```bash
python test_fix.py
```

测试内容包括：
- 配置保存和加载功能
- 路径验证功能
- 编译检查功能
- UI组件功能

## 注意事项

1. **路径设置**：首次使用需要手动设置项目路径和引擎路径
2. **编译前检查**：确保没有编辑器正在运行
3. **权限要求**：确保对项目目录有写入权限
4. **依赖检查**：确保系统已安装MSBuild或Visual Studio

## 故障排除

### 编译按钮没反应
- 检查路径设置是否正确
- 查看日志区域的错误信息
- 确保项目文件存在

### 配置没有保存
- 检查插件目录的写入权限
- 查看控制台输出的错误信息
- 手动创建配置目录

### 编译失败
- 检查MSBuild是否安装
- 验证项目文件完整性
- 查看详细的编译日志

## 更新历史

- **v1.1** - 添加编译按钮和配置保存功能
- **v1.0** - 基础SVG注册管理功能
